{"remainingRequest":"/Users/caojiangtao/wdcold/DOM/canvasvideo/node_modules/babel-loader/lib/index.js!/Users/caojiangtao/wdcold/DOM/canvasvideo/node_modules/eslint-loader/index.js??ref--14-0!/Users/caojiangtao/wdcold/DOM/canvasvideo/src/components/canvasVideo.js","dependencies":[{"path":"/Users/caojiangtao/wdcold/DOM/canvasvideo/src/components/canvasVideo.js","mtime":1667817186785},{"path":"/Users/caojiangtao/wdcold/DOM/canvasvideo/babel.config.js","mtime":1667373355868},{"path":"/Users/caojiangtao/wdcold/DOM/canvasvideo/node_modules/cache-loader/dist/cjs.js","mtime":1667373244349},{"path":"/Users/caojiangtao/wdcold/DOM/canvasvideo/node_modules/babel-loader/lib/index.js","mtime":1667373244354},{"path":"/Users/caojiangtao/wdcold/DOM/canvasvideo/node_modules/eslint-loader/index.js","mtime":1667373257162}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tICIvVXNlcnMvY2Fvamlhbmd0YW8vd2Rjb2xkL0RPTS9jYW52YXN2aWRlby9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZGVmaW5lUHJvcGVydHkuanMiOwpjbGFzcyBjYW52YXNWaWRlbyB7CiAgY29uc3RydWN0b3IoZGF0YSkgewogICAgdGhpcy5kYXRhID0gZGF0YTsKICAgIHRoaXMuc3RhdHVjID0gY2FudmFzVmlkZW8uUExBWV9TVEFUVUMuUEFVU0U7CiAgICBjb25zdCB3ZGNWaWRlbyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd3ZGMtdmlkZW8nKTsKICAgIGlmICh3ZGNWaWRlbykgewogICAgICBjb25zdCB2aWRlbyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInZpZGVvIik7CiAgICAgIHZpZGVvLmlkID0gJ3dkY1ZpZGVvJzsKICAgICAgdmlkZW8uc3JjID0gZGF0YS5zcmM7CiAgICAgIHZpZGVvLndpZHRoID0gZGF0YS53aWR0aDsKICAgICAgdmlkZW8uaGVpZ2h0ID0gZGF0YS5oZWlnaHQ7CiAgICAgIHdkY1ZpZGVvLmFwcGVuZENoaWxkKHZpZGVvKTsKICAgICAgdGhpcy52aWRlbyA9IHZpZGVvOwogICAgfSBlbHNlIHsKICAgICAgY29uc29sZS5sb2coJ+S9oOmcgOimgeWFiOWcqOmhtemdouWKoOWFpUlE5Li64oCcd2RjLXZpZGVv4oCd55qERE9N5YWD57SgJyk7CiAgICB9CiAgICB0aGlzLmNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImNhbnZhcyIpOwogICAgdGhpcy5jYW52YXMud2lkdGggPSBkYXRhLndpZHRoICsgZGF0YS5ib3JkZXIgKiAyOwogICAgdGhpcy5jYW52YXMuaGVpZ2h0ID0gZGF0YS5oZWlnaHQgKyBkYXRhLmJvcmRlciAqIDIgKyA1MDsKICAgIHRoaXMuY2FudmFzLmlkID0gdGhpcy52aWRlby5pZCArICJDYW52YXMiOwogICAgdGhpcy52aWRlby5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOwogICAgdGhpcy52aWRlby5wYXJlbnROb2RlLmFwcGVuZENoaWxkKHRoaXMuY2FudmFzKTsKICAgIHRoaXMudmlkZW8uYm9yZGVyID0gZGF0YS5ib3JkZXI7CiAgICB0aGlzLmMyZCA9IHRoaXMuY2FudmFzLmdldENvbnRleHQoIjJkIik7CiAgICB0aGlzLnZpZGVvLmFkZEV2ZW50TGlzdGVuZXIoInBsYXkiLCB0aGlzLnBsYXkuYmluZCh0aGlzKSk7CiAgICB0aGlzLnZpZGVvLmFkZEV2ZW50TGlzdGVuZXIoInBhdXNlIiwgdGhpcy5wYXVzZS5iaW5kKHRoaXMpKTsKCiAgICAvLyBDcmVhdGUKICAgIHRoaXMudmlkZW9VaSgpOwogIH0KICBzZWNUb3RpbWUocykgewogICAgdmFyIHQgPSAnJzsKICAgIGlmIChzID4gLTEpIHsKICAgICAgdmFyIGhvdXIgPSBNYXRoLmZsb29yKHMgLyAzNjAwKTsKICAgICAgdmFyIG1pbiA9IE1hdGguZmxvb3IocyAvIDYwKSAlIDYwOwogICAgICB2YXIgc2VjID0gcyAlIDYwOwogICAgICBpZiAoaG91ciA8IDEwKSB7CiAgICAgICAgdCA9ICcwJyArIGhvdXIgKyAiOiI7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdCA9IGhvdXIgKyAiOiI7CiAgICAgIH0KICAgICAgaWYgKG1pbiA8IDEwKSB7CiAgICAgICAgdCArPSAiMCI7CiAgICAgIH0KICAgICAgdCArPSBtaW4gKyAiOiI7CiAgICAgIGlmIChzZWMgPCAxMCkgewogICAgICAgIHQgKz0gIjAiOwogICAgICB9CiAgICAgIHQgKz0gc2VjLnRvRml4ZWQoMCk7CiAgICB9CiAgICByZXR1cm4gdDsKICB9CiAgcmVuZGVyKCkgewogICAgLy/nu5jliLbov5vluqbmnaEKICAgIGlmICh0aGlzLnN0YXR1YyA9PSBjYW52YXNWaWRlby5QTEFZX1NUQVRVQy5QTEFZKSB7CiAgICAgIHRoaXMuYzJkLmNsZWFyUmVjdCh0aGlzLmRhdGEuYm9yZGVyIC8gMiwgdGhpcy5kYXRhLmJvcmRlciAvIDIsIHRoaXMudmlkZW8ud2lkdGgsIHRoaXMudmlkZW8uaGVpZ2h0KTsKICAgICAgdGhpcy5jMmQuZHJhd0ltYWdlKHRoaXMudmlkZW8sIHRoaXMuZGF0YS5ib3JkZXIgLyAyLCB0aGlzLmRhdGEuYm9yZGVyIC8gMiwgdGhpcy52aWRlby53aWR0aCwgdGhpcy52aWRlby5oZWlnaHQpOwogICAgICBpZiAoIXRoaXMuYWxsVGltZSkgewogICAgICAgIHRoaXMuYWxsVGltZSA9IHRoaXMudmlkZW8uZHVyYXRpb247CiAgICAgIH0KICAgICAgbGV0IGN1cnJlbnQgPSB0aGlzLnZpZGVvLndpZHRoICogKHRoaXMudmlkZW8uY3VycmVudFRpbWUgLyB0aGlzLmFsbFRpbWUpOwoKICAgICAgLy/nu5jliLbov5vluqbmoIfor4YKICAgICAgdGhpcy5jMmQuYmVnaW5QYXRoKCk7CiAgICAgIHRoaXMuYzJkLmZpbGxTdHlsZSA9ICdvcmFuZ2UnOwogICAgICB0aGlzLmMyZC5jbGVhclJlY3QodGhpcy5kYXRhLmJvcmRlciAvIDIsIHRoaXMudmlkZW8uaGVpZ2h0ICsgMTAsIHRoaXMudmlkZW8ud2lkdGgsIDEwKTsKICAgICAgdGhpcy5jMmQuZmlsbFJlY3QodGhpcy5kYXRhLmJvcmRlciAvIDIsIHRoaXMudmlkZW8uaGVpZ2h0ICsgMTAsIGN1cnJlbnQsIDEwKTsKICAgICAgdGhpcy5jMmQuZmlsbCgpOwogICAgICB0aGlzLmMyZC5jbGVhclJlY3QodGhpcy5kYXRhLndpZHRoIC0gMTUwLCB0aGlzLnZpZGVvLmhlaWdodCArIDIwLCAyMDAsIDQwKTsKICAgICAgdGhpcy5jMmQuYmVnaW5QYXRoKCk7CiAgICAgIHRoaXMuYzJkLmZpbGxTdHlsZSA9ICcjMDAwJzsKICAgICAgdGhpcy5jMmQuZmlsbFJlY3QodGhpcy5kYXRhLndpZHRoIC0gMTUwLCB0aGlzLnZpZGVvLmhlaWdodCArIDIwLCAxNTYsIDM2KTsKICAgICAgdGhpcy5jMmQuZmlsbCgpOwogICAgICB0aGlzLmMyZC5mb250ID0gIjE0cHggQXJpYWwiOwogICAgICB0aGlzLmMyZC5maWxsU3R5bGUgPSAiI2ZmZmZmZiI7CiAgICAgIHRoaXMuYzJkLmZpbGxUZXh0KHRoaXMuc2VjVG90aW1lKHRoaXMudmlkZW8uY3VycmVudFRpbWUpICsgIi8iICsgdGhpcy5zZWNUb3RpbWUodGhpcy5hbGxUaW1lKSwgdGhpcy5kYXRhLndpZHRoIC0gMTUwLCB0aGlzLnZpZGVvLmhlaWdodCArIDQwKTsKICAgICAgY29uc29sZS5sb2coJ3RoaXMudmlkZW8uZW5kZWQwLS0tLT4nLCB0aGlzLnZpZGVvLmVuZGVkKTsKICAgICAgaWYgKHRoaXMudmlkZW8uZW5kZWQpIHJldHVybjsKICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHRoaXMucmVuZGVyLmJpbmQodGhpcykpOwogICAgfQogIH0KICAvL+e7mOWItuaSreaUvuWZqAogIHZpZGVvVWkoKSB7CiAgICAvL+e7mOWItui+ueahhgogICAgdGhpcy5jMmQuZmlsbFN0eWxlID0gJyMwMDAnOwogICAgdGhpcy5jMmQuZmlsbFJlY3QoMCwgMCwgdGhpcy5kYXRhLndpZHRoICsgdGhpcy5kYXRhLmJvcmRlciwgdGhpcy52aWRlby5oZWlnaHQgKyB0aGlzLmRhdGEuYm9yZGVyICsgNTApOwogICAgdGhpcy5jMmQuZmlsbCgpOwoKICAgIC8v57uY5Yi26L+b5bqm5p2h5bqV6ImyCiAgICB0aGlzLmMyZC5iZWdpblBhdGgoKTsKICAgIHRoaXMuYzJkLmZpbGxTdHlsZSA9ICcjY2NjJzsKICAgIHRoaXMuYzJkLmZpbGxSZWN0KHRoaXMuZGF0YS5ib3JkZXIgLyAyLCB0aGlzLnZpZGVvLmhlaWdodCArIDEwLCB0aGlzLmRhdGEud2lkdGgsIDEwKTsKICAgIHRoaXMuYzJkLmZpbGwoKTsKICAgIC8v5pKt5pS+5oyJ6ZKuCiAgICB0aGlzLnBsYXlJbWcgPSBuZXcgSW1hZ2UoKTsKICAgIGNvbnNvbGUubG9nKCdwbGF5LS0tPicsIHRoaXMucGxheSk7CiAgICBjb25zdCBwbGF5SWNvbiA9IHJlcXVpcmUoJy4vaW1hZ2VzL3BsYXkucG5nJyk7CiAgICB0aGlzLnBhbHlQb3NpdGlvbiA9IHsKICAgICAgeDogdGhpcy52aWRlby53aWR0aCAvIDIgLSA1MCwKICAgICAgeTogdGhpcy52aWRlby5oZWlnaHQgLyAyIC0gNTAsCiAgICAgIHdpZHRoOiAxMDAsCiAgICAgIGhlaWdodDogMTAwCiAgICB9OwogICAgdGhpcy5wbGF5SW1nLm9ubG9hZCA9ICgpID0+IHsKICAgICAgY29uc29sZS5sb2coJ3BsYXktLS0+MTExJywgdGhpcy5wbGF5KTsKICAgICAgdGhpcy5jMmQuZHJhd0ltYWdlKHRoaXMucGxheUltZywgdGhpcy5wYWx5UG9zaXRpb24ueCwgdGhpcy5wYWx5UG9zaXRpb24ueSwgdGhpcy5wYWx5UG9zaXRpb24ud2lkdGgsIHRoaXMucGFseVBvc2l0aW9uLmhlaWdodCk7CiAgICAgIGNvbnNvbGUubG9nKCdwbGF5LS0tPicsIHRoaXMucGxheSk7CiAgICB9OwogICAgdGhpcy5wbGF5SW1nLnNyYyA9IHBsYXlJY29uOwoKICAgIC8vIG1pblBsYXlJY29u5pKt5pS+5oyJ6ZKuCiAgICB0aGlzLm1pblBsYXkgPSBuZXcgSW1hZ2UoKTsKICAgIGNvbnN0IHBsYXlJY29uMiA9IHJlcXVpcmUoJy4vaW1hZ2VzL21pblBsYXkucG5nJyk7CiAgICB0aGlzLm1pblBhbHlQb3NpdGlvbiA9IHsKICAgICAgeDogMTAsCiAgICAgIHk6IHRoaXMudmlkZW8uaGVpZ2h0ICsgMjMsCiAgICAgIHdpZHRoOiAzMCwKICAgICAgaGVpZ2h0OiAzMAogICAgfTsKICAgIHRoaXMubWluUGxheS5vbmxvYWQgPSAoKSA9PiB7CiAgICAgIHRoaXMuYzJkLmNsZWFyUmVjdCh0aGlzLm1pblBhbHlQb3NpdGlvbi54LCB0aGlzLm1pblBhbHlQb3NpdGlvbi55LCB0aGlzLm1pblBhbHlQb3NpdGlvbi53aWR0aCwgdGhpcy5taW5QYWx5UG9zaXRpb24uaGVpZ2h0KTsKICAgICAgdGhpcy5jMmQuYmVnaW5QYXRoKCk7CiAgICAgIHRoaXMuYzJkLmZpbGxTdHlsZSA9ICcjMDAwJzsKICAgICAgdGhpcy5jMmQuZmlsbFJlY3QodGhpcy5taW5QYWx5UG9zaXRpb24ueCwgdGhpcy5taW5QYWx5UG9zaXRpb24ueSwgdGhpcy5taW5QYWx5UG9zaXRpb24ud2lkdGgsIHRoaXMubWluUGFseVBvc2l0aW9uLmhlaWdodCk7CiAgICAgIHRoaXMuYzJkLmZpbGwoKTsKICAgICAgdGhpcy5jMmQuZHJhd0ltYWdlKHRoaXMubWluUGxheSwgdGhpcy5taW5QYWx5UG9zaXRpb24ueCwgdGhpcy5taW5QYWx5UG9zaXRpb24ueSwgdGhpcy5taW5QYWx5UG9zaXRpb24ud2lkdGgsIHRoaXMubWluUGFseVBvc2l0aW9uLmhlaWdodCk7CiAgICB9OwogICAgdGhpcy5taW5QbGF5LnNyYyA9IHBsYXlJY29uMjsKICB9CiAgcGxheSgpIHsKICAgIGNvbnNvbGUubG9nKCLmkq3mlL4iLCB0aGlzLnZpZGVvKTsKICAgIGlmICh0aGlzLnZpZGVvLnBhdXNlZCkgdGhpcy52aWRlby5wbGF5KCk7CiAgICB0aGlzLnN0YXR1YyA9IGNhbnZhc1ZpZGVvLlBMQVlfU1RBVFVDLlBMQVk7CiAgICBjb25zdCBwYXVzZUljb24gPSByZXF1aXJlKCcuL2ltYWdlcy9wYXVzZS5wbmcnKTsKICAgIHRoaXMubWluUGxheS5zcmMgPSBwYXVzZUljb247CiAgICB0aGlzLnJlbmRlcigpOwogICAgcmV0dXJuIHRoaXM7CiAgfQogIHBhdXNlKCkgewogICAgY29uc29sZS5sb2coIuaaguWBnCIpOwogICAgaWYgKHRoaXMudmlkZW8ucGxheWVkKSB0aGlzLnZpZGVvLnBhdXNlKCk7CiAgICB0aGlzLnN0YXR1YyA9IGNhbnZhc1ZpZGVvLlBMQVlfU1RBVFVDLlBBVVNFOwogICAgY29uc3QgcGxheUljb24gPSByZXF1aXJlKCcuL2ltYWdlcy9taW5QbGF5LnBuZycpOwogICAgdGhpcy5taW5QbGF5LnNyYyA9IHBsYXlJY29uOwogICAgcmV0dXJuIHRoaXM7CiAgfQp9Cl9kZWZpbmVQcm9wZXJ0eShjYW52YXNWaWRlbywgIlBMQVlfU1RBVFVDIiwgewogIFBMQVk6IDEsCiAgLy/mkq3mlL4KICBQQVVTRTogMCAvL+aaguWBnAp9KTsKCmxldCBpbml0VmlkZW8gPSB7CiAgaW5pdChkYXRhKSB7CiAgICBsZXQgdmlkZW8gPSBuZXcgY2FudmFzVmlkZW8oZGF0YSk7CiAgICBjb25zb2xlLmxvZygndmlkZW8tLS0+JywgdmlkZW8pOwogICAgbGV0IF9jYW52YXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnd2RjVmlkZW9DYW52YXMnKTsKICAgIF9jYW52YXMub25jbGljayA9IGUgPT4gewogICAgICBmdW5jdGlvbiBwYXVzZSh2aWRlbykgewogICAgICAgIGlmICh2aWRlby5zdGF0dWMgPT0gMCkgewogICAgICAgICAgcmV0dXJuIHZpZGVvLnBsYXkuYmluZCh2aWRlbyk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJldHVybiB2aWRlby5wYXVzZS5iaW5kKHZpZGVvKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgaW5pdFZpZGVvLnBsYXlDbGljayhlLCB2aWRlby5wYWx5UG9zaXRpb24sIHZpZGVvLnBsYXkuYmluZCh2aWRlbykpOyAvL+aSreaUvgogICAgICBpbml0VmlkZW8ucGxheUNsaWNrKGUsIHZpZGVvLm1pblBhbHlQb3NpdGlvbiwgcGF1c2UodmlkZW8pKTsgLy/mmoLlgZwKICAgIH07CiAgfSwKCiAgZW5mQ2FsbEJhY2soY2FsbGJhY2spIHsKICAgIGNhbGxiYWNrKCk7CiAgfSwKICBnZXRFdmVudFBvc2l0aW9uKGV2KSB7CiAgICB2YXIgeCwgeTsKICAgIGlmIChldi5vZmZzZXRYIHx8IGV2Lm9mZnNldFggPT0gMCkgewogICAgICAvLyBPcGVyYQogICAgICB4ID0gZXYub2Zmc2V0WDsKICAgICAgeSA9IGV2Lm9mZnNldFk7CiAgICB9CiAgICByZXR1cm4gewogICAgICB4OiB4LAogICAgICB5OiB5CiAgICB9OwogIH0sCiAgcGxheUNsaWNrKGUsIHBvc2l0aW9uLCBjYWxsYmFjaykgewogICAgbGV0IHAgPSB0aGlzLmdldEV2ZW50UG9zaXRpb24oZSk7CiAgICBjb25zb2xlLmxvZygncC0tLT4nLCBwLCBwb3NpdGlvbik7CiAgICBpZiAocC54ID49IHBvc2l0aW9uLnggJiYgcC55ID49IHBvc2l0aW9uLnkgJiYgcC54IDw9IHBvc2l0aW9uLnggKyBwb3NpdGlvbi53aWR0aCAmJiBwLnkgPD0gcG9zaXRpb24ueSArIHBvc2l0aW9uLmhlaWdodCkgewogICAgICBjYWxsYmFjaygpOwogICAgfQogIH0KfTsKZXhwb3J0IGRlZmF1bHQgaW5pdFZpZGVvOw=="},{"version":3,"names":["canvasVideo","constructor","data","statuc","PLAY_STATUC","PAUSE","wdcVideo","document","getElementById","video","createElement","id","src","width","height","appendChild","console","log","canvas","border","style","display","parentNode","c2d","getContext","addEventListener","play","bind","pause","videoUi","secTotime","s","t","hour","Math","floor","min","sec","toFixed","render","PLAY","clearRect","drawImage","allTime","duration","current","currentTime","beginPath","fillStyle","fillRect","fill","font","fillText","ended","requestAnimationFrame","playImg","Image","playIcon","require","palyPosition","x","y","onload","minPlay","playIcon2","minPalyPosition","paused","pauseIcon","played","initVideo","init","_canvas","onclick","e","playClick","enfCallBack","callback","getEventPosition","ev","offsetX","offsetY","position","p"],"sources":["/Users/caojiangtao/wdcold/DOM/canvasvideo/src/components/canvasVideo.js"],"sourcesContent":["\n\nclass canvasVideo {\n    static PLAY_STATUC = {\n        PLAY: 1, //播放\n        PAUSE: 0 //暂停\n    }\n    constructor(data) {\n        this.data = data;\n        this.statuc = canvasVideo.PLAY_STATUC.PAUSE;\n        const wdcVideo = document.getElementById('wdc-video');\n        if (wdcVideo) {\n            const video = document.createElement(\"video\");\n            video.id = 'wdcVideo'\n            video.src = data.src\n            video.width = data.width\n            video.height = data.height\n            wdcVideo.appendChild(video)\n            this.video = video\n        } else {\n            console.log('你需要先在页面加入ID为“wdc-video”的DOM元素')\n        }\n        this.canvas = document.createElement(\"canvas\");\n        this.canvas.width = data.width + data.border * 2;\n        this.canvas.height = data.height + data.border * 2 + 50;\n        this.canvas.id = this.video.id + \"Canvas\";\n        this.video.style.display = \"none\";\n        this.video.parentNode.appendChild(this.canvas);\n        this.video.border = data.border\n        this.c2d = this.canvas.getContext(\"2d\");\n        this.video.addEventListener(\"play\", this.play.bind(this));\n        this.video.addEventListener(\"pause\", this.pause.bind(this));\n\n        // Create\n        this.videoUi()\n\n    }\n    secTotime(s) {\n        var t = '';\n        if (s > -1) {\n            var hour = Math.floor(s / 3600)\n            var min = Math.floor(s / 60) % 60\n            var sec = s % 60\n            if (hour < 10) {\n                t = '0' + hour + \":\"\n            } else {\n                t = hour + \":\"\n            }\n            if (min < 10) {\n                t += \"0\"\n            }\n            t += min + \":\"\n            if (sec < 10) {\n                t += \"0\"\n            }\n            t += sec.toFixed(0)\n        }\n        return t\n    }\n    render() {\n        //绘制进度条\n        if (this.statuc == canvasVideo.PLAY_STATUC.PLAY) {\n            this.c2d.clearRect(this.data.border / 2,\n                this.data.border / 2,\n                this.video.width,\n                this.video.height);\n            this.c2d.drawImage(\n                this.video,\n                this.data.border / 2,\n                this.data.border / 2,\n                this.video.width,\n                this.video.height\n            );\n            if (!this.allTime) {\n                this.allTime = this.video.duration\n            }\n            let current = this.video.width * (this.video.currentTime / this.allTime)\n\n            //绘制进度标识\n            this.c2d.beginPath();\n            this.c2d.fillStyle = 'orange';\n            this.c2d.clearRect(this.data.border / 2, this.video.height + 10, this.video.width, 10);\n            this.c2d.fillRect(this.data.border / 2, this.video.height + 10, current, 10);\n            this.c2d.fill();\n\n\n            this.c2d.clearRect(this.data.width - 150, this.video.height + 20, 200, 40);\n            this.c2d.beginPath();\n            this.c2d.fillStyle = '#000';\n            this.c2d.fillRect(this.data.width - 150, this.video.height + 20, 156, 36);\n            this.c2d.fill();\n\n            this.c2d.font = \"14px Arial\"\n            this.c2d.fillStyle = \"#ffffff\";\n            this.c2d.fillText(this.secTotime(this.video.currentTime) + \"/\" + this.secTotime(this.allTime), this.data.width - 150, this.video.height + 40)\n\n            console.log('this.video.ended0---->', this.video.ended)\n\n            if (this.video.ended) return\n            requestAnimationFrame(this.render.bind(this));\n        }\n\n\n    }\n    //绘制播放器\n    videoUi() {\n        //绘制边框\n        this.c2d.fillStyle = '#000';\n        this.c2d.fillRect(0, 0, this.data.width + this.data.border, this.video.height + this.data.border + 50);\n        this.c2d.fill();\n\n        //绘制进度条底色\n        this.c2d.beginPath();\n        this.c2d.fillStyle = '#ccc';\n        this.c2d.fillRect(this.data.border / 2, this.video.height + 10, this.data.width, 10);\n        this.c2d.fill();\n        //播放按钮\n        this.playImg = new Image();\n        console.log('play--->', this.play)\n        const playIcon = require('./images/play.png')\n        this.palyPosition = {\n            x: this.video.width / 2 - 50,\n            y: this.video.height / 2 - 50,\n            width: 100,\n            height: 100,\n        }\n\n        this.playImg.onload = () => {\n            console.log('play--->111', this.play)\n            this.c2d.drawImage(this.playImg, this.palyPosition.x, this.palyPosition.y, this.palyPosition.width, this.palyPosition.height);\n            console.log('play--->', this.play)\n        }\n        this.playImg.src = playIcon;\n\n        // minPlayIcon播放按钮\n        this.minPlay = new Image();\n        const playIcon2 = require('./images/minPlay.png')\n        this.minPalyPosition = {\n            x: 10,\n            y: this.video.height + 23,\n            width: 30,\n            height: 30,\n        }\n        this.minPlay.onload = () => {\n            this.c2d.clearRect(this.minPalyPosition.x, this.minPalyPosition.y, this.minPalyPosition.width, this.minPalyPosition.height);\n            this.c2d.beginPath();\n            this.c2d.fillStyle = '#000';\n            this.c2d.fillRect(this.minPalyPosition.x, this.minPalyPosition.y, this.minPalyPosition.width, this.minPalyPosition.height);\n            this.c2d.fill();\n            this.c2d.drawImage(this.minPlay, this.minPalyPosition.x, this.minPalyPosition.y, this.minPalyPosition.width, this.minPalyPosition.height);\n        }\n\n        this.minPlay.src = playIcon2;\n    }\n    play() {\n        console.log(\"播放\", this.video);\n        if (this.video.paused) this.video.play();\n        this.statuc = canvasVideo.PLAY_STATUC.PLAY;\n        const pauseIcon = require('./images/pause.png')\n        this.minPlay.src = pauseIcon;\n        this.render();\n        return this;\n    }\n\n    pause() {\n        console.log(\"暂停\");\n        if (this.video.played) this.video.pause();\n        this.statuc = canvasVideo.PLAY_STATUC.PAUSE;\n        const playIcon = require('./images/minPlay.png')\n        this.minPlay.src = playIcon;\n        return this;\n    }\n}\n\nlet initVideo = {\n    init(data) {\n        let video = new canvasVideo(data)\n        console.log('video--->', video);\n        let _canvas = document.getElementById('wdcVideoCanvas')\n        _canvas.onclick = (e) => {\n            function pause(video) {\n                if (video.statuc == 0) {\n                    return video.play.bind(video)\n                } else {\n                    return video.pause.bind(video)\n                }\n            }\n            initVideo.playClick(e, video.palyPosition, video.play.bind(video));//播放\n            initVideo.playClick(e, video.minPalyPosition, pause(video));//暂停\n        }\n\n    },\n    enfCallBack(callback) {\n        callback()\n    },\n    getEventPosition(ev) {\n        var x, y;\n        if (ev.offsetX || ev.offsetX == 0) { // Opera\n            x = ev.offsetX;\n            y = ev.offsetY;\n        }\n        return { x: x, y: y };\n    },\n    playClick(e, position, callback) {\n        let p = this.getEventPosition(e)\n        console.log('p--->', p, position)\n        if (p.x >= position.x && p.y >= position.y && p.x <= position.x + position.width && p.y <= position.y + position.height) {\n            callback()\n        }\n    }\n}\n\n\nexport default initVideo"],"mappings":"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"}]}